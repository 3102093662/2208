# 数据监听

用于监听和响应任何属性和数据字段的变化，从而执行特定的操作，类似于vue的侦听器  。基本类型于对象格式类似， 不能直接监听对象

语法：

![基本数据监听](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\基本数据监听.png)

![对象数据监听](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\对象数据监听.png)

# 自定义组件-纯数据字段

概念：纯数据字段指的是那些不用于界面渲染的data字段

应用场景：有些情况下，某些data中的字段既不会展示在界面上，也不会传递给其他组件，仅仅在当前组件内部使用，带有这种特性的data字段适合呗设置为纯数据字段

好处：纯数据字段有助于提升页面跟新的性能

规则：在component构造器的options节点中，指定pureDataPattern为一个正则表达式，字段名符合这个正则表达式的字段将成为纯数据字段

![纯数据字段](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\纯数据字段.png)

# 组件的生命周期函数

| 生命周期函数 | 参数         | 描述声明                                 |
| ------------ | ------------ | ---------------------------------------- |
| created      | 无           | 在组件实例刚刚呗创建是执行               |
| attached     | 无           | 在组件实例进入页面节点树时执行           |
| ready        | 无           | 在组件在视图层布局完成后执行             |
| moved        | 无           | 在组件实例呗移动到节点树另一个位置时执行 |
| detached     | 无           | 在组件实例被从页面节点树移除时执行       |
| error        | Object Error | 每当组件方法抛出错误时执行               |

最主要的声明周期函数：created、attached、detached、

组件实例刚被创建好的时候，created生命周期函数会被触发

​	此时还不能调用setData

​	通常在这个生命周期函数中，只应该用于给组件this添加一些自定义的属性字段

在组件完全初始化完毕、进入页面节点树后，attached生命周期函数会被触发

​	此时，this.data已被初始化完毕

​	这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行

在组件离开页面节点树后，detached生命周期函数会被触发

​	退出一个页面时，会触发页面内每个自定义组件的detached生命周期函数

​	此时适合做一些请理性质的工作

# 插槽

单个插槽：

在父组件的子组件中  写一些东西，在子组件里加<slot></slot>

多个插槽 ：多个插槽需要在组件.js里开启属性![开启多个插槽](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\开启多个插槽.png)

在父组件的子组件中  写一些东西,并给标签加上slot属性，属性值为子组件里对应的name属性值，在子组件里加<slot name='a'></slot>



![组件隔离](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\组件隔离.png)

# 父子组件通信

类似于vue的父子通信

## 父传子：

自定义属性名，在子组件里的properties接受，可以是对象格式/数组格式

type:类型，value:默认值

## 子传父：

自定义事件：父组件的子组件里  bind:自定义=“”    获取传递的值e.detail

在子里用this.triggerEvent触发  

## 获取组件实例

父组件里通过this.selectComponent获取子组件的实例对象，通过(class,id)获取

可以直接调用子组件的任意数据和方法

# 自定义组件behaviors

创建一个全局共享的behavior实例对象 在js文件里创建

![behavior](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\behavior.png)

在组件里导入，并挂载

![导入behavior](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\导入behavior.png)

behavior中所有可用的节点

![behavior节点](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\behavior节点.png)

![总结behavior](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\总结behavior.png)

# 小程序对npm的制车于限制

目前，小程序已经支持使用npm安装第三方包，从而提高小程序的开发效率，但也有限制：

不支持依赖于node.js内置库的包

不支持依赖于浏览器内置对象的包

不支持依赖于C++插件的包

# 全局数据共享

是为了解决组件之间数据共享的问题

开发中常用的全局数据共享方案，有vuex、redux、mobx

## mobx

![mobx](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\mobx.png)

![mobx3](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\mobx3.png)

![mobx4](C:\Users\李林桂\Desktop\p11笔记 作业\day08\笔记总结\img\mobx4.png)